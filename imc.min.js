function ImageUploadCompressor(e=""){if(""!=e&&document.querySelector("input."+e)){const e=async(e,{quality:t=1,type:a=e.type})=>{const i=await createImageBitmap(e),n=document.createElement("canvas");n.width=i.width,n.height=i.height;n.getContext("2d").drawImage(i,0,0);const s=await new Promise((e=>n.toBlob(e,a,t)));return new File([s],e.name,{type:s.type})},t=document.querySelector(".my-image-field");t.addEventListener("change",(async a=>{t.disabled=!0;const{files:i}=a.target;if(!i.length)return;const n=new DataTransfer;for(const a of i){if(!a.type.startsWith("image")){n.items.add(a);continue}const i=await e(a,{quality:.5,type:"image/jpeg"});n.items.add(i),t.disabled=!1}a.target.files=n.files}))}}